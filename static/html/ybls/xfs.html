<!DOCTYPE html>
<html>

<head>

  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>基础地图展示</title>

  <meta name="renderer" content="webkit">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta tabindex="">
  <link rel="stylesheet" type="text/css" href="http://117.184.195.173:25002/jsmap/1.0/demo/apidemos/sourceLinks/style.css">
  <script type="text/javascript" src="http://117.184.195.173:25002/jsmap/1.0/demo/scripts/jsurl.js"></script>

  <link rel="stylesheet" type="text/css" href="./ybls.css">

  <script src="../../js/jquery.min.js"></script>
  <script src="../../js/js.cookie-2.2.0.min.js"></script>
  <script src="../../js/jquery.base64.js"></script>
  <script src="../../js/countUp.js"></script>
  <script src="../../js/layer/layer.js"></script>

  <script src="./ybls.js"></script>

  <script>
    // 页面默认的定位
    function loadDefaultLocations() {

      // 加载消防重点单位
      loadAmount();
    }

    function loadAmount() {
      loadData(baseUrl + "/xfss/totalAmounts", token, function (data) {
        var code = data.code;
        if (code == 200) {
          countUp('total', data.data);
        }
      })
      $('#total').click();
    }
    // 加载实有单位
    function loadLocations() {
      $('.loading').show();
      loadData(baseUrl + "/xfss/locations", token, function (data) {
        var code = data.code;
        if (code == 200) {
          var locations = data.data
          addCluster(locations, 'xfs');
          $('.loading').hide();
        }
      });
    }

  </script>

</head>

<body style="overflow: hidden">
  <div id="map" class="map_contaner"></div>

  <div class="loading">
    <div class="loadEffect">
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
    </div>
  </div>

  <!-- 首页操作按钮 -->
  <div class="operator-container left" style="left: 5px;">
    <div class="operator-ops" style="border-left: 6px solid #ffd700; border-right: 0px; float: left;">
      <label class="operator-label on" onclick="openHome();" style="margin-left: 6px;">
        <span class="operator-checkbox operator-input"></span>
        首页
      </label>
      <label class="operator-label off" onclick="openYbls('unit');">
        <span class="operator-checkbox operator-input"></span>
        实有单位
      </label>
      <label class="operator-label off" onclick="openYbls('house');">
        <span class="operator-checkbox operator-input"></span>
        实有房屋
      </label>
    </div>
  </div>

  <div class="operator-container right" style="right: 5px;">
    <div class="operator-ops" style="border-right: 0px solid #ffd700; border-left: 0px; float: left;">
      <label class="operator-label on">
        <span class="operator-checkbox operator-input"></span>
        消防栓
      </label>
      <label class="operator-label off" onclick="openYbls('gydh');">
        <span class="operator-checkbox operator-input"></span>
        公用电话
      </label>
      <label class="operator-label off" onclick="openYbls('atm');">
        <span class="operator-checkbox operator-input"></span>
        银行ATM
      </label>
    </div>
  </div>

  <div class="dept-container" style="width: 150px;">
    <div class="dept-row">

      <div class="dept-box on">
        <div class="dept-num num-syafss" id="total" style="cursor: pointer;" onclick="loadLocations()">0</div>
        <div class="dept-info">金山区消防栓总量</div>
      </div>
    </div>
  </div>


  <!-- Head -->
  <div class="head-container">
    <div class="head_logo"></div>
  </div>
  <script type="text/javascript">
    var map;

    function initMap() {
      map = new IMAP.Map("map", {
        minZoom: 3,
        maxZoom: 20,
        // 设置地图初始化级别
        zoom: 14,
        // 设置地图中心点坐标
        center: new IMAP.LngLat(121.3377285004, 30.7521905824),
        // 设置地图缩放动画效果
        animation: true
      });
    }

    // 初始化地图
    initMap();
    // 添加路网图层
    addRoadNetLayer();

  </script>

</body>

</html>
